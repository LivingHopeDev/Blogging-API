# INTRODUCTION

This API allows users to manage their blogs, create new blogs, and view existing ones. It also provides functionality for authentication, pagination, searching, filtering, and ordering blogs.

The API functionalities includes:

1. Only a logged in user can create a blog.
2. Author of a blog can perform the CRUD on a specified blog whether the blog is in a draft state or has been published.
3. Any user can view a published blog whether logged in or not.
4. An estimated time (in minute) is generated by an algorithmand is added to each blog depending on the length of the blog/article.
5. Winson is used in this application to log activity.

## Getting started

#### ER Diagram for the entities.

<!-- ![](./screenshot.png) -->

![](./blogAPI-ERD.PNG)

### Installation

Developers who are interested in using this API should have node installed on their local machines if not already installed.

### Clone the repository

```
git clone https://github.com/LivingHopeDev/Blogging-API

```

- Blogging-API

```
cd Blogging-API
```

To install all dependencies, run `npm install`

### Configuration

```
Set the port in the .env file. e.g
PORT=5000
```

To run the application, run any of the commands

```
nodemon app
npm start
```

The application will run on `http://127.0.0.1:5000/`.
For the live url, visit `https://blogging-api-2ge7.onrender.com`.

## API Reference

### Endpoints

To test for the endpoints, the developer should have installed Postman or thunder client or any other application with similar capability or use curl.

#### POST /

### User Registration

This is a POST request, submitting data to an API via the request body. This request submits JSON data, and the data is reflected in the response as shown below.
A successful POST request typically returns a 201 Created response code and a message.

sample: `localhost:5000/user/register`

```

{
    "first_name":"test",
    "last_name":"author",
    "email":"author1@gmail.com",
    "password":"test12",
    "confirm_password":"test12"
}
```

```
{
    "message": "Registration successful",
    "data": {
        "first_name": "test",
        "last_name": "author",
        "email": "author1@gmail.com",
        "password": "$2b$12$wOFvMzCkjEJ6aw5vY2Xfwu8Ew3WH9nIOPHUKAdV18.1ovr4xHOESO",
        "_id": "663ffe774764483f7c2010ed",
        "createdAt": "2024-05-11T23:25:43.170Z",
        "updatedAt": "2024-05-11T23:25:43.170Z",
        "__v": 0
    }
}
```

#### POST

### User Login

This endpoint is used to authenticate a user by providing their email and password.
Request Body
email (string): The email of the user.
password (string): The password of the user.

sample: `localhost:5000/user/login`

- body (JSON)

```
{
 {
    "email":"author@gmail.com",
    "password":"test12"
}
}
```

```

{
 {
    "message": "Login successful",
    "_id": "663fa2779c4266164e88b425",
    "first_name": "test",
    "last_name": "author",
    "email": "author@gmail.com",
    "createdAt": "2024-05-11T16:53:11.259Z",
    "updatedAt": "2024-05-11T16:53:11.259Z",
    "__v": 0,
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2M2ZhMjc3OWM0MjY2MTY0ZTg4YjQyNSIsImlhdCI6MTcxNTQ1MjA1NSwiZXhwIjoxNzE1NDU1NjU1fQ.U47h3eqt0uSrchm03otBjC_LoNvgPdr0HiwkTjbHbkg"
}
}

```

### Create a blog post

### POST /blog

This endpoint (protected) allows you to create a new blog post.
Request Body
title (string): The title of the blog post.
description (string): A brief description of the blog post.
body (string, required): The main content of the blog post.
tags (array of strings, required): An array of tags associated with the blog post.

```
{
    "title": "Travel Hacks for Budget-Conscious Adventurers",
    "description": "Explore the world without breaking the bank with these travel hacks.",
    "body": "Traveling the world can be an enriching experience, but it can also be expensive. Here are some tips to help you travel on a budget...",
    "tags": ["travel", "budget"]
}
```

```

{
    "message": "Blog created successfully",
    "data": {
        "title": "Travel Hacks for Budget-Conscious Adventurers m",
        "description": "Explore the world without breaking the bank with these travel hacks.",
        "author": "663fa2779c4266164e88b425",
        "state": "draft",
        "read_count": 0,
        "reading_time": 1,
        "tags": [
            "travel",
            "budget"
        ],
        "body": "Traveling the world can be an enriching experience, but it can also be expensive. Here are some tips to help you travel on a budget...",
        "_id": "664000e64764483f7c2010f1",
        "createdAt": "2024-05-11T23:36:06.075Z",
        "updatedAt": "2024-05-11T23:36:06.075Z",
        "__v": 0
    }
}

```

### PATCH /blog/:id/post

This endpoint (protected) is used to update a specific blog post.
Request
The request should include a JSON payload in the raw request body type with any of the parameter content that needs to be updated.

title (string): The title of the blog post.
description (string): A brief description of the blog post.
body (string): The main content of the blog post.
tags (array of strings): An array of tags associated with the blog post.

```
{
       "title": "Updated title",

}
```

```
{
    "message": "Blog content updated successfully",
    "data": {
        "_id": "663fa2b99c4266164e88b429",
        "title": "Updated title",
        "description": "Explore the world without breaking the bank with these travel hacks.",
        "author": "663fa2779c4266164e88b425",
        "state": "published",
        "read_count": 0,
        "reading_time": 1,
        "tags": [
            "travel",
            "budget"
        ],
        "body": "Traveling the world can be an enriching experience, but it can also be expensive. Here are some tips to help you travel on a budget...",
        "createdAt": "2024-05-11T16:54:17.524Z",
        "updatedAt": "2024-05-11T16:57:36.764Z",
        "__v": 0
    }
}
```

### PATCH /blog/:id/post

This endpoint (protected) is used to update the state of an existing blog to either make it "draft" or "published" blog

```

{
"state": "published" // or "draft"
}

```

```

{
    "message": "Blog state updated successfully",
    "data": {
        "_id": "663fa3db9c4266164e88b43e",
        "title": "Travel Hacks for Budget-Conscious Adventurers",
        "description": "Explore the world without breaking the bank with these travel hacks.",
        "author": "663fa2779c4266164e88b425",
        "state": "published",
        "read_count": 0,
        "reading_time": 1,
        "tags": [
            "travel",
            "budget"
        ],
        "body": "Traveling the world can be an enriching experience, but it can also be expensive. Here are some tips to help you travel on a budget...",
        "createdAt": "2024-05-11T16:59:07.871Z",
        "updatedAt": "2024-05-11T16:59:07.871Z",
        "__v": 0
    }
}

```

### DELETE /blog/:id

sample: `localhost:5000/blog/:id`

```

{
"message": "Blog post deleted successfully"
}

```

### GET /blog/

This endpoint (protected) makes an HTTP GET request to retrieve a list of blog posts that have been published. The response is in JSON format with a status code of 200. The response body contains an array of blog post objects, each including an ID, title, description, author details, state, read count, reading time, tags, body, creation and update timestamps, and a version field.

sample: `localhost:5000/blog`

```

{
"message": "List of blogs",
"data": [
{
"\_id": "663fa3db9c4266164e88b43e",
"title": "Travel Hacks for Budget-Conscious Adventurers",
"description": "Explore the world without breaking the bank with these travel hacks.",
"author": {
"\_id": "663fa2779c4266164e88b425",
"first_name": "test",
"last_name": "author"
},
"state": "published",
"read_count": 0,
"reading_time": 1,
"tags": [
"travel",
"budget"
],
"body": "Traveling the world can be an enriching experience, but it can also be expensive. Here are some tips to help you travel on a budget...",
"createdAt": "2024-05-11T16:59:07.871Z",
"updatedAt": "2024-05-11T16:59:07.871Z",
"\_\_v": 0
}
]
}

```

### GET /blog/:id

This endpoint retrieves a specific blog post by its unique identifier. The read_count property is increased by 1 when the blog has been viewed.

```

{
"message": "Current blog",
"data": {
"\_id": "663e37f29d9d3fb1aa887297",
"title": "Fresh ololod",
"description": "This is the description",
"author": {
"\_id": "663e349c038ac834486f0fae",
"first_name": "test",
"last_name": "author"
},
"state": "published",
"read_count": 2,
"tags": [
"eat well",
"healthy food"
],
"body": "A long body",
"createdAt": "2024-05-10T15:06:26.656Z",
"updatedAt": "2024-05-11T11:28:36.024Z",
"\_\_v": 0
}
}

```

### GET /blog/author

The endpoint (protected) retrieves a list of blog posts written by a specific author, with pagination support for limiting the number of results per page and navigating through the pages.
With this endpoint, each logged in user can view their created blog posts.

### Error codes in the API

- 404: Not found
- 401: Unauthorized
- 403: Forbidden
- 500: Internal server error
- 200: ok
- 201: created a resource

```

```
